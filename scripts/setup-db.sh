#!/bin/sh

echo "๐ ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช..."

# ุงูุชุธุงุฑ ุญุชู ุชุตุจุญ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฌุงูุฒุฉ
until npx prisma db push --accept-data-loss; do
  echo "โณ ุงูุชุธุงุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช..."
  sleep 2
done

echo "โ ุชู ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจูุฌุงุญ"

# ุชุดุบูู ุงูุจุฐูุฑ ุฅุฐุง ูู ุชูู ููุฌูุฏุฉ
echo "๐ฑ ุฅุถุงูุฉ ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ..."
npx prisma db seed || echo "โ๏ธ ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ ููุฌูุฏุฉ ุจุงููุนู"

echo "๐ ุจุฏุก ุงูุชุทุจูู..."
exec "$@"
